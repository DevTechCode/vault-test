name: Terraform CD

on:
  workflow_dispatch:
    inputs:
      analytics_account:
        required: false
        type: string
        default: ''
      is_sa_automation:
        required: false
        type: boolean
        default: false
        
permissions:
  contents: read
  actions: read

jobs:

  # ðŸ‘‡ Terraform deploy zostawiam bez zmian (zakomentowane)
  # terraform-deploy-g03:
  #   ...

  # terraform-deploy-g00:
  #   ...
  
  trigger-sa-job-analytics-accounts:
      name: 3. Trigger SA Job - Analytics Accounts
      if: ${{ inputs.is_sa_automation && inputs.analytics_account != '' }}
      runs-on: traffic-runners
  
      steps:
        - name: Trigger SA Jenkins job
          run: |
            set -euo pipefail
            echo "Triggering Jenkins for account: $ANALYTICS_ACCOUNT"
            echo "${{ inputs.analytics_account }}"
            
  should-skip:
      name: noname
      if: ${{ !inputs.is_sa_automation && inputs.analytics_account != '' }}
      runs-on: traffic-runners
  
      steps:
        - name: Trigger SA Jenkins job
          run: |
            set -euo pipefail
            echo "Triggering Jenkins for account: $ANALYTICS_ACCOUNT"
            echo "${{ inputs.analytics_account }}"
            
